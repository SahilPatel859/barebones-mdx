import { useState, useEffect } from "react";

<Flex
  direction="column"
  justify="center"
  p={3}
  bg="brand.background"
>
<Text
  fontSize="3xl"
  fontWeight="light"
  color="brand.text"
  mt={4}
  m={[3, 3, null]}
  align="center"
>
Data fetching direct inside this very MDX file
</Text>

<Link
  my={5}
  href="https://johno.com/use-effect-for-fetching-data-in-mdx/"
  isExternal
  color="brand.text"
>
  Example lifted from John Otanders blog
</Link>

export const PokemonData = () => {
  const [pokemon, setPokemon] = useState(null);
  useEffect(() => {
    const fetchPokemon = () => {
      fetch("https://pokeapi.co/api/v2/ability/")
        .then((result) => result.json())
        .then((data) => setPokemon(data));
    };
    fetchPokemon();
  }, []);
  if (!pokemon) {
    return <h1>Fetching pokemon...</h1>;
  }
  return (
    <Box as="pre" color="brand.text">
      {JSON.stringify(pokemon, null, 2)}
    </Box>
  );
};

<PokemonData />
</Flex>
